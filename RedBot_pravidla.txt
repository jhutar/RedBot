
    Pravidla

Proti sobě je postaveno několik království které soupeří o území. Budují
si armádu a dobývají protivníkovy území. Najímají rolníky na produkci
jídla, zlepšují si efektivitu svých akcí a můžou provádět speciální akce
(které lze u jednodušších strategií ignorovat - popsány jsou až dále).

Hraje se na předem daný počet kol a na konci hry vítězí království s
největším územím.

Každé království má tyto základní parametry:

    * území
    * jídlo
    * vojáky
    * úroveň zbrojení
    * rolníky
    * úroveň farmaření

Soupeřící království jsou označena 1, 2 a 3 (viz id. království).

Každé kolo může království provést právě jednu z těchto akcí:

kód	možná akce	její výsledek
v	verbovat vojáka	1 nový voják
r	vyučit rolníka	1 nový rolník
z	vylepšit úroveň zbrojení	úroveň zbrojení se zvýší o 1
f	vylepšit úroveň farmaření	úroveň farmaření se zvýší o 1
s	sklízet úrodu	do sýpky přibude 3*(počet_rolníků)*(úroveň_farmaření DIV
3) jednotek jídla, kde DIV je celočíselné dělení beze zbytku
u <id_království> <počet_vojáků>	útočit na vybrané království	na dané
království bude proveden útok o síle (počet_vojáků)*(úroveň_zbrojení)

Akce se vyhodnocují v tomto pořadí:

   1. naverbují se vojáci, vyučí rolníci, zlepší se úrovně vlastností a
      provede se sklizeň
   2. vyhodnotí se útoky
          * spočítá se útočná síla (počet_útočníků)*(úroveň_zbrojení DIV
            3) a obraná síla (počet_obránců)*(úroveň_zbrojení DIV 3)*1.5
            (zaokrouhleno na celé číslo dolů)
          * zemřou všichni vojáci strany která prohrála a příslušný
            poměr vojáků vítěze
                o pokud útočník vyhraje, získává od obránce území
                  velikosti rozdílu (útočná_síla-obraná_síla) a zabije
                  obránci stejný počet rolníků
                o pokud útočí více království na jedno, síly útočníků se
                  sčítají a útok se vyhodnotí jako společný. Případné
                  vyhrané území a mrtví vojáci se počítají pro každého
                  útočníka proporčně
   3. automaticky se na konci kola odečtou zásoby jídla nutné na provoz
      království (každý rolník a voják spotřebuje za kolo 1 jednotku
      jídla). Pokud království dojdou zásoby, obyvatelé, které nebylo
      možné nakrmit umírají hlady. Nejdříve vojáci, pak rolníci.


    Speciální vlastnosti a akce

kód	možná akce	její výsledek
t	vylepšit úroveň tajných služeb	úroveň tajných služeb se zvýší o 1
i	získat informace o ostatních královstvích	pokud je akce provedena ve
dvou po sobě jdoucích kolech, pak se útočník dozví současný stav všech
království která mají nižší úroveň tajných služeb
l <id_kralovstvi>	loupit svitky se znalostmi daného království	pokud je
akce provedena ve třech po sobě jdoucích kolech, pak se provede loupežný
útok na knihovnu daného království

Loupež se provádí nezávisle na obě základní vlastnosti (zbrojení a
farmaření). Vyhodnocuje se takto: Pokud má obránce vyšší úroveň
vlastnosti zbrojení, pak útočník ukradne dvě úrovně (o 2 se sníží
vlastnost obránci a o 2 se zvýší útočníkovi). Pokud má obránce stejnou
nebo menší úroveň zbrojení, pak se útočník nedozvěděl nic nového ale
poničil jeden svitek obránci (obráncova úroveň zbrojení se sníží o 1).
Stejně se vyhodnotí loupežný útok na farmaření.

Speciální akce se provádí po útocích a před odečtem zásob jídla, a to v
pořadí loupež svitků a pak zjisti informace.


    Implementace

Strategie se spouští s 8 parametry na příkazové řádce:

./strategie 99 1 2 3 4 5 6 7

Kde parametry mají tento význam: 99 kol do konce, vaše království má 1
území, 2 vojáky, 3 rolníky, 4 úrovně zbrojení, 5 úrovní farmaření, 6
jídla na skladu a 7 úrovní tajných služeb.

    * Každá strategie musí na standardní výstup odpovědět do 2 sekund
      jednou z akcí (jejím kódem a případnými argumenty).
    * Každé království vidí ostatní království pod ID 1 až 3. Vaše
      království má vždy ID 0.
    * Implementace jednotlivých strategií si mohou do svého pracovního
      adresáře ukládat jakékoliv pomocné soubory.
    * Dodatečné informace o výsledcích akcí jsou v informačních
      souborech v pracovním adresáři každé strategie.


    Informační soubory

    * utok.txt
    * obrana.txt
    * loupez_utok.txt
    * loupez_obrana.txt
    * informace.txt


      utok.txt

Obsahuje informace o výsledcích mého útoku na cizí království v minulém
kole.

cil=3
utocnici=0
ztraty_ja_vojaci=1
ztraty_cile_vojaci=1
ztraty_cile_rolnici=3
zisk_ja_uzemi=9

Takže: na království 3, v minulém kole útočilo království 0 (to jsem
já). Vaše útočící armáda přišla o 1 vojáka, cílové království ztratilo
také jednoho ale navíc 3 rolníky. Útok vašemu království přinesl 9 území.


      obrana.txt

Obsahuje informace o výsledcích útoků na mé království v minulém kole.

utocnici=1,2
ztraty_utoku_vojaci=1
ztraty_ja_vojaci=1
ztraty_ja_rolnici=3
ztraty_ja_uzemi=9

Takže: na mé království (tedy království 0) v minulém kole zaútočila
království 1 a 2. Útočníci dohromady ztratili jednoho vojáka, já ztratil
1 vojáka a 3 rolníky. Přišel jsem o 9 území.


      loupez_utok.txt

Obsahuje informace o výsledcích mého loupení v minulém kole.

cil=2
zisk_ja_zbrojeni=0
ztraty_cile_zbrojeni=1
zisk_ja_farmareni=2
ztraty_cile_farmareni=2

Takže: protože obráncovo zbrojení bylo vyšší ale farmaření nižší, lupič
zničil jednu úroveň zbrojení cíle, ale žádnou nezískal. Co se úrovně
farmaření týče byl úspěšnější, protože 2 úrovně cíli zničil a 2 přinesl
do svého království.


      loupez_obrana.txt

Obsahuje informace o výsledcích cizího loupení u mě v minulém kole.

utocnici=2,3
ztraty_ja_zbrojeni=3
ztraty_ja_farmareni=4

Zde jeden z útočníků měl vyšší a jeden nižší úroveň zbrojení a oba
útočníci měli nižší úroveň farmaření.


      informace.txt

Obsahuje zjištěné informace o ostatních královstvích na konci minulého kola.

1: 25 3 1 3 3 43 0
2: 25 2 1 3 3 43 0
3: 25 1 1 3 3 43 0

Takže: například království 2 má 25 území, 2 vojáky, 1 rolníka, 3 úrovně
zbrojení, 3 úrovně farmaření, 43 jídla a 0 úrovní tajných služeb.


    Spuštění serveru

    * Jak přeložit zdrojový kód serveru: |make|
    * Typické spuštění serveru: |./redbot -f default_playfield.txt
      strategie1/random.sh strategie2/random.sh strategie3/random.sh
      strategie4/random.sh|
    * V adresáři |strategie/| jsou 3 testovací strategie
    * Zobrazení historie hry (jak se měnilo území jednotlivých
      království) - nutné mít nainstalován Gnuplot:
      |./historie_zapasu.sh <soubor_s_historii_hry>|

